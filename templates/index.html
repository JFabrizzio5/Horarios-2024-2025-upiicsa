<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Filtrar Horarios</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <div class="container mt-5">
      <h1 class="text-center">Filtrar Horarios</h1>
      <form id="filtro-form" method="POST" class="mb-4">
        <div class="input-group">
          <input
            type="text"
            name="secuencia"
            id="secuencia"
            class="form-control"
            placeholder="Ingresa la secuencia a filtrar"
          />
          <button class="btn btn-primary" type="submit">Filtrar</button>
        </div>
      </form>

      {% if datos %}
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Programa Académico</th>
            <th>Plan</th>
            <th>ESTD Turno</th>
            <th>Secuencia</th>
            <th>Unidad de Aprendizaje</th>
            <th>Academia</th>
            <th>Docente/Profesor</th>
            <th>Lunes</th>
            <th>Lunes Salón</th>
            <th>Martes</th>
            <th>Martes Salón</th>
            <th>Miércoles</th>
            <th>Miércoles Salón</th>
            <th>Jueves</th>
            <th>Jueves Salón</th>
            <th>Viernes</th>
            <th>Viernes Salón</th>
            <th>Edificio</th>
            <th>Salón</th>
            <!-- Columna opcional -->
          </tr>
        </thead>
        <tbody>
          {% for dato in datos %}
          <tr>
            <td>{{ dato.programa_academico }}</td>
            <td>{{ dato.plan }}</td>
            <td>{{ dato.estd_turno }}</td>
            <td>{{ dato.secuencia }}</td>
            <td>{{ dato.unidad_de_aprendizaje }}</td>
            <td>{{ dato.academia }}</td>
            <td>{{ dato.get('docente', dato.get('profesor', '')) }}</td>
            <td>{{ dato.lunes }}</td>
            <td>{{ dato.lunes_salon }}</td>
            <td>{{ dato.martes }}</td>
            <td>{{ dato.martes_salon }}</td>
            <td>{{ dato.miercoles }}</td>
            <td>{{ dato.miercoles_salon }}</td>
            <td>{{ dato.jueves }}</td>
            <td>{{ dato.jueves_salon }}</td>
            <td>{{ dato.viernes }}</td>
            <td>{{ dato.viernes_salon }}</td>
            <td>{{ dato.edificio }}</td>
            <td>{{ dato.get('salon', '') }}</td>
            <!-- Salón solo para la segunda estructura -->
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-center">
        No se encontraron datos para la secuencia especificada.
      </p>
      {% endif %}
    </div>
  </body>
</html>
